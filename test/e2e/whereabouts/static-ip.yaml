apiVersion: nmstate.io/v1
kind: NodeNetworkConfigurationPolicy
metadata:
  name: static-ip
spec:
  ipPools:
    foo:
      range: "10.10.10.0/16"
      rangeStart: "10.10.10.1"
      rangeEnd: "10.10.10.10"
    bar:
      range: "10.10.11.0/16"
      rangeStart: "10.11.10.1"
      rangeEnd: "10.10.11.10"
  nodeSelector:
    node-role.kubernetes.io/worker: ""
  capture: 
    address-from-foo: ipPool.foo
    address-from-bar: ipPool.bar
  desiredState:
    interfaces:
    - name: eth1
      type: ethernet
      state: up
      ipv4:
        address: 
        - ip: "{{ capture.address-from-foo.ip }}"
          prefix-length: "{{ capture.address-from-foo.prefix-length }}"
        dhcp: false
        enabled: true
    - name: eth2
      type: ethernet
      state: up
      ipv4:
        address: 
        - ip: "{{ capture.address-from-bar.ip }}"
          prefix-length: "{{ capture.address-from-bar.prefix-length }}"
        dhcp: false
        enabled: true
